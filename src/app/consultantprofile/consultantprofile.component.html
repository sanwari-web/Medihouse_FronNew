<!-- Navbar-->
<nav class="navbar navbar-expand-lg navbar-muted">
  <div name="navbar" class="container-fluid">
    <!-- Left elements -->
    <div class="d-flex align-items-sm-right">
      <!-- Brand -->
      <a
        class="navbar-brand me-2 mb-1 d-flex align-self-start"
        routerLink="/dashboard"
      >
        <img
          src="assets/images/image3.png"
          height="40"
          alt=""
          loading="lazy"
          style="margin-top: 2px"
        />
      </a>
    </div>
    <!-- Left elements -->
    <!-- Right elements -->
    <ul class="navbar-nav flex-row">
      <li class="nav-item me-3 me-lg-1 active">
        <a class="nav-link" routerLink="/dashboard">
          <span><i class="fa fa-home fa-lg"></i></span>
          <span class="badge rounded-pill badge-notification bg-danger"></span>
        </a>
      </li>
      <li class="nav-item me-3 me-lg-1">
        <a class="nav-link d-sm-flex align-items-sm-left">
          <img
            src="assets/images/doctor.png"
            class="rounded-circle"
            height="30"
            alt=""
            loading="lazy"
          />
          <strong
            class="d-none d-sm-block ms-1"
            routerLink="/consultantprofile"
          ></strong
          >Dr.{{ userdata.first_name }}
        </a>
      </li>

      <li
        class="nav-item px-4"
        ngbDropdown
        display="dynamic"
        placement="bottom-end"
      >
        <a
          class="nav-link"
          tabindex="0"
          ngbDropdownToggle
          id="navbarDropdown3"
          role="button"
        >
          <i class="fa fa-chevron-circle-down fa-lg"></i>
        </a>
        <div
          ngbDropdownMenu
          aria-labelledby="navbarDropdown3"
          class="dropdown-menu"
        >
          <a
            ngbDropdownItem
            routerLink="/consultantprofile"
            (click)="$event.preventDefault()"
            >My Profile</a
          >
          <a ngbDropdownItem (click)="logout()">LogOut</a>
        </div>
      </li>
    </ul>
    <!-- Right elements -->
  </div>
</nav>

<body>
  <div class="container emp-profile border border-primary">
    <form method="post">
      <div class="row">
        <div class="col-md-4">
          <div class="profile-img">
            <img src="assets/images/doctor2.jpg" alt="" />
          </div>
        </div>
        <div class="col-md-8">
          <div class="profile-head">
            <h3>Dr.{{ userdata.first_name }} {{ userdata.last_name }}</h3>
            <h5>MBBS</h5>
            <ul class="nav nav-tabs" id="myTab" role="tablist">
              <li class="nav-item">
                <a
                  class="nav-link active"
                  id="home-tab"
                  data-toggle="tab"
                  href="#home"
                  role="tab"
                  aria-controls="home"
                  aria-selected="true"
                  >About</a
                >
              </li>
              <li class="nav-item">
                <a
                  class="nav-link"
                  id="appoinment-tab"
                  data-toggle="tab"
                  href="#appoinment"
                  role="tab"
                  aria-controls="appoinment"
                  aria-selected="true"
                  >Appoinments</a
                >
              </li>
              <li class="nav-item">
                <a
                  class="nav-link"
                  id="profile-tab"
                  data-toggle="tab"
                  href="#passwordchange"
                  role="tab"
                  aria-controls="profile"
                  aria-selected="false"
                  >Change Password</a
                >
              </li>
              <li class="nav-item">
                <a
                  class="nav-link"
                  id="profile-tab"
                  data-toggle="tab"
                  href="#profile"
                  role="tab"
                  aria-controls="profile"
                  aria-selected="false"
                  >Session Summary</a
                >
              </li>
            </ul>
          </div>
        </div>
      </div>
      <div class="row">
        <div class="col-md-4">
          <div class="profile-work"></div>
        </div>
        <div class="col-md-8">
          <div class="tab-content profile-tab" id="myTabContent">
            <div
              class="tab-pane fade show active"
              id="home"
              role="tabpanel"
              aria-labelledby="home-tab"
            >
              <div class="row">
                <div class="col-md-6">
                  <label>Name</label>
                </div>
                <div class="col-md-6">
                  <p>Dr.{{ userdata.first_name }} {{ userdata.last_name }}</p>
                </div>
              </div>
              <div class="row">
                <div class="col-md-6">
                  <label>Email</label>
                </div>
                <div class="col-md-6">
                  <p>{{ userdata.email }}</p>
                </div>
              </div>
              <div class="row">
                <div class="col-md-6">
                  <label>NIC</label>
                </div>
                <div class="col-md-6">
                  <p>{{ userdata.nic }}</p>
                </div>
              </div>
              <div class="row">
                <div class="col-md-6">
                  <label>System Role</label>
                </div>
                <div class="col-md-6">
                  <p>{{ userdata.role }}</p>
                </div>
              </div>
              <br />

              <div class="float-right btn-group btn-group-sm">
                <a
                  (click)="onOpenModal(userdata, 'edit')"
                  class="btn btn-secondary tooltips"
                  data-placement="top"
                  data-original-title="edit"
                  *ngIf="isAdmin"
                  ><i class="fa fa-pencil"></i><b>Edit Profile</b></a
                >
              </div>
            </div>
            <div
              class="tab-pane fade"
              id="appoinment"
              role="tabpanel"
              aria-labelledby="profile-tab"
            >
              
            <div class="row">
              <table class="table table-striped table-bordered">
                <thead>
                  <tr>
                    <th>Appointment Id</th>
                    <th>Patient Name</th>
                    <th>Appoinment Date</th>
                    <th>Appointment Time</th>
                  </tr>
                </thead>
                <tbody>
                  <tr *ngFor="let appointment of appointment">
                    <th>{{ appointment.id }}</th>
                    <th>
                      {{ appointment.patient.first_name }} {{ appointment.patient.last_name }}
                    </th>
                    <td>{{ appointment.date }}</td>
                    <td>{{ appointment.time }}</td>
                  </tr>
                </tbody>
              </table>
                </div>
            </div>
            <div
              class="tab-pane fade"
              id="passwordchange"
              role="tabpanel"
              aria-labelledby="profile-tab"
            >
              <div class="row">
                <form>
                  <div class="form-group">
                    <label for="InputPassword">Current Password : </label>
                    <input
                      type="password"
                      [(ngModel)]="currentpassword"
                      name="currentpassword"
                      class="form-control"
                      id="InputPassword"
                      placeholder="Password"
                    />
                  </div>
                  <div class="form-group">
                    <label for="InputPassword1">New Password:</label>
                    <input
                      type="password"
                      [(ngModel)]="newpassword"
                      name="newpassword"
                      (ngModelChange)="validatePassword()"
                      class="form-control"
                      id="InputPassword1"
                      placeholder="New Password"
                    />
                    <div *ngIf="passwordError" class="error-message">
                      <b>{{ passwordError }}</b>
                    </div>
                  </div>
                  <div class="form-group">
                    <label for="InputPassword2">Confirm Password:</label>
                    <input
                      type="password"
                      [(ngModel)]="confirmpassword"
                      name="confirmpassword"
                      (ngModelChange)="matchpassword()"
                      class="form-control"
                      id="InputPassword2"
                      placeholder="Confirm Password"
                    />
                    <span *ngIf="matchconfirmpassword"
                      ><b>*Passwords do not match!</b></span
                    >
                  </div>
                  <br />
                  <button
                    type="submit"
                    (click)="ChangePassword()"
                    data-dismiss="modal"
                    class="btn btn-secondary"
                  >
                    Change Password
                  </button>
                </form>
              </div>
            </div>
            <div
              class="tab-pane fade"
              id="profile"
              role="tabpanel"
              aria-labelledby="profile-tab"
            >
              <div class="row">
                <table class="table table-striped table-bordered">
                  <thead>
                    <tr>
                      <th>Session Id</th>
                      <th>Patient Name</th>
                      <th>Diagnosis Type</th>
                      <th>Session Date</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr *ngFor="let session of session">
                      <th>{{ session.session_id }}</th>
                      <th>
                        {{ userdata.first_name }} {{ userdata.last_name }}
                      </th>
                      <td>{{ session.diagnosis }}</td>
                      <td>{{ session.date }}</td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>
          </div>
        </div>
      </div>
    </form>
  </div>

  <div
    class="modal fade"
    id="updateEmployeeModal"
    tabindex="-1"
    role="dialog"
    aria-labelledby="employeeEditModalLabel"
    aria-hidden="true"
  >
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h3 class="modal-title" id="updateEmployeeModalLabel">
            Edit Employee {{ editConsultant?.first_name }}
          </h3>
          <button
            type="button"
            class="close"
            data-dismiss="modal"
            aria-label="Close"
          >
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
          <form #editForm="ngForm">
            <div class="form-group">
              <label for="name">First Name</label>
              <input
                type="text"
                ngModel="{{ userdata?.first_name }}"
                name="first_name"
                class="form-control"
                id="first_name"
                aria-describedby="emailHelp"
                placeholder="First Name"
              />
            </div>
            <input
              type="hidden"
              ngModel="{{ userdata?.id }}"
              name="id"
              class="form-control"
              id="id"
              placeholder="Email"
            />
            <div class="form-group">
              <label for="name">Last Name</label>
              <input
                type="text"
                ngModel="{{ userdata?.last_name }}"
                name="last_name"
                class="form-control"
                id="last_name"
                aria-describedby="emailHelp"
                placeholder="Last Name"
              />
            </div>
            <div class="form-group">
              <label for="email">Email</label>
              <input
                type="email"
                [(ngModel)]="userdata.email"
                ngModel="{{ userdata?.email }}"
                name="email"
                (ngModelChange)="ValidateEmail()"
                class="form-control"
                id="email"
                placeholder="Email"
              />
              <span *ngIf="validateemailformat" class="text-danger"
                ><b>Invalid email address !</b></span
              >
            </div>
            <div class="form-group">
              <label for="dateofbirth">Date of Birth</label>
              <br />
              <input
                id="dob"
                ngModel="{{ userdata?.dob }}"
                name="dob"
                ngModel
                name="dob"
                type="date"
                id="dateofbirth"
              />
            </div>

            <div class="form-group">
              <label for="gender">Gender</label>
              <input
                type="text"
                ngModel="{{ userdata?.gender }}"
                name="gender"
                class="form-control"
                id="gender"
                name="gender"
                placeholder="Gender"
              />
            </div>
            <div class="form-group">
              <label for="nic">NIC</label>
              <input
                type="text"
                ngModel="{{ userdata?.nic }}"
                name="nic"
                class="form-control"
                id="nic"
                placeholder="NIC"
              />
              <input
                type="hidden"
                ngModel="{{ userdata?.role }}"
                name="role"
                class="form-control"
                id="role"
                placeholder="Job title"
              />
              <input
                type="hidden"
                [disabled]="true"
                ngModel="{{ userdata?.password }}"
                name="password"
                class="form-control"
                id="password"
                placeholder="password"
              />
            </div>
            <div class="form-group">
              <label for="nic">Mobile</label>
              <input
                type="text"
                ngModel="{{ userdata?.mobile }}"
                name="mobile"
                class="form-control"
                id="mobile"
                placeholder="Mobile"
                required
              />
            </div>
            <div class="form-group">
              <label for="city">City </label>
              <input
                type="text"
                ngModel="{{ userdata?.city }}"
                name="city"
                class="form-control"
                id="city"
                placeholder="City"
                required
              />
            </div>
            <div class="form-group">
              <label for="district">District</label>
              <select
                type="text"
                ngModel="{{ userdata?.district }}"
                name="district"
                class="form-control"
                id="district"
                placeholder="Select District"
              >
                <option>Colombo</option>
                <option>Gampaha</option>
                <option>Kalutara</option>
                <option>Kandy</option>
                <option>Matale</option>
                <option>Nuwara Eliya</option>
                <option>Galle</option>
                <option>Matara</option>
                <option>Hambantota</option>
                <option>Jaffna</option>
                <option>Kilinochchi</option>
                <option>Mannar</option>
                <option>Vavuniya</option>
                <option>Mullaitivu</option>
                <option>Batticaloa</option>
                <option>Ampara</option>
                <option>Trincomalee</option>
                <option>Kurunegala</option>
                <option>Puttalam</option>
                <option>Anuradhapura</option>
                <option>Polonnaruwa</option>
                <option>Badulla</option>
                <option>Moneragala</option>
                <option>Ratnapura</option>
                <option>Kegalle</option>
              </select>
            </div>
            <div class="modal-footer">
              <button
                type="button"
                id=""
                data-dismiss="modal"
                class="btn btn-secondary"
              >
                Close
              </button>
              <button
                (click)="onUpdateConsultant(editForm.value)"
                data-dismiss="modal"
                class="btn btn-primary"
              >
                Save changes
              </button>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>
</body>
